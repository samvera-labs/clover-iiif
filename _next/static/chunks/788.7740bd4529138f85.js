"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{2239:function(e,t,o){o.d(t,{c:function(){return n}});let n=(0,o(6216).zo)("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}})},9788:function(e,t,o){o.r(t),o.d(t,{default:function(){return F}});var n,i,r=o(5893),a=o(9203),l=o.n(a);let s=window.OpenSeadragon;if(!s&&!(s=l()))throw Error("OpenSeadragon is missing.");let c="http://www.w3.org/2000/svg";s.Viewer&&(s.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new d(this)),this._svgOverlayInfo});let d=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(c,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(c,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};d.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new s.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),o=this._viewer.viewport.getRotation(),n=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,r=i*t,a=r;n&&(r=-r,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+r+","+a+") rotate("+o+")")},onClick:function(e,t){new s.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};var u=o(404),m=o(9626);(n=i||(i={})).TiledImage="tiledImage",n.SimpleImage="simpleImage";let h=e=>{let t=Array.isArray(null==e?void 0:e.service)&&(null==e?void 0:e.service.length)>0;return{uri:t?(0,m.AG)(null==e?void 0:e.service):null==e?void 0:e.id,imageType:t?i.TiledImage:i.SimpleImage}},g=(e,t)=>({uri:e,imageType:t?i.TiledImage:i.SimpleImage});var f=o(4511),v=o(2641),p=o(6216);let b=(0,p.zo)("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),S=(0,p.zo)("div",{position:"relative",width:"100%",height:"100%",zIndex:"0",".clover-iiif-image-openseadragon-annotation":{position:"relative",backgroundColor:"transparent",border:"2px solid #0003",boxSizing:"content-box",borderRadius:"3px",boxShadow:"0 0 38vw 38vw transparent",transition:"box-shadow 100ms ease-in-out",zIndex:"0",label:{opacity:0,position:"absolute",lineHeight:"1.47rem",pointerEvents:"none",textAlign:"center",minWidth:"300px",maxWidth:"20vw",padding:"0.5rem",borderRadius:"3px",top:"calc(100% + 0.5rem)",left:"50%",transform:"translate(-50%, 0)",backgroundColor:"$primary",color:"$secondary",transition:"opacity 100ms ease-in-out"},"&[data-active=true]":{border:"2px solid $accent !important",boxShadow:"0 0 38vw 38vw #0003",zIndex:"99999999",label:{opacity:1}}}}),w=(0,p.zo)("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{["".concat(b)]:{display:"block"}},false:{["".concat(b)]:{display:"none"}}}}});var y=o(7294),x=o(9176),C=o(2239),P=e=>{let{className:t,id:o,label:n,children:i}=e,a=o.split("-")[0].replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");return(0,r.jsx)(C.c,{id:o,className:t,"data-testid":"openseadragon-button","data-button":a,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"".concat(o,"-svg-title"),"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,r.jsx)("title",{id:"".concat(o,"-svg-title"),children:n}),i]})})};let A=(0,p.zo)("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}});var L=o(9365);let I=()=>(0,r.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),k=()=>(0,r.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),R=()=>(0,r.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),T=()=>(0,r.jsx)("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),j=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),(0,r.jsx)("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})]});var O=e=>{let{_cloverViewerHasPlaceholder:t,config:o}=e,{t:n}=(0,L.L)(),{activeCanvas:i,plugins:a,vault:l,openSeadragonViewer:s}=(0,x.D1)(),c=l.get({id:i,type:"Canvas"});return(0,y.useEffect)(()=>{if(!s)return;let e=s.viewport.getRotation();s.addHandler("home",()=>{s.viewport.setRotation(e)})},[s]),(0,r.jsxs)(A,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:t,children:[o.showZoomControl&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{id:o.zoomInButton,label:n("imageZoomIn"),children:(0,r.jsx)(I,{})}),(0,r.jsx)(P,{id:o.zoomOutButton,label:n("imageZoomOut"),children:(0,r.jsx)(k,{})})]}),o.showFullPageControl&&(0,r.jsx)(P,{id:o.fullPageButton,label:n("imageFullScreen"),children:(0,r.jsx)(R,{})}),o.showRotationControl&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{id:o.rotateRightButton,label:n("imageRotateRight"),children:(0,r.jsx)(j,{})}),(0,r.jsx)(P,{id:o.rotateLeftButton,label:n("imageRotateLeft"),children:(0,r.jsx)(j,{})})]}),o.showHomeControl&&(0,r.jsx)(P,{id:o.homeButton,label:n("imageResetZoom"),children:(0,r.jsx)(T,{})}),a.filter(e=>{var t;return null===(t=e.imageViewer)||void 0===t?void 0:t.controls}).map((e,t)=>{var o,n,i,a;let l=null===(n=e.imageViewer)||void 0===n?void 0:null===(o=n.controls)||void 0===o?void 0:o.component;return(0,r.jsx)(l,{...null==e?void 0:null===(a=e.imageViewer)||void 0===a?void 0:null===(i=a.controls)||void 0===i?void 0:i.componentProps,canvas:c,useViewerDispatch:x.Cu,useViewerState:x.D1},t)})]})};async function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;try{return await e()}catch(n){if(t<=0)throw n;return await new Promise(e=>setTimeout(e,o)),M(e,t-1,o)}}u.LV;let N=e=>new Promise(t=>setTimeout(t,e)),V=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;for(let i=0;i<o;i++){let o=t?t-1:0,i=e.getItemAt(o);if(i)return i;await N(n)}throw Error("No base item found at index 0 after retries")};var E=e=>{let{annotations:t,ariaLabel:o,config:n,uri:i,_cloverViewerHasPlaceholder:a,imageType:s,openSeadragonCallback:c}=e,[d,h]=(0,y.useState)([]),[g,f]=(0,y.useState)([]),[v,p]=(0,y.useState)(),[C,P]=(0,y.useState)([]),A=(0,x.Cu)(),L=(0,y.useRef)(!1),I=!1===n.gestureSettingsMouse.scrollToZoom;function k(){v&&(null==c||c(v))}return(0,y.useEffect)(()=>(L.current||(L.current=!0,v||p(l()(n))),()=>null==v?void 0:v.destroy()),[]),(0,y.useEffect)(()=>{k()},[v,c]),(0,y.useEffect)(()=>{v&&JSON.stringify(i)!==JSON.stringify(g)&&(v.forceRedraw(),I&&v.addHandler("canvas-scroll",function(e){e.preventDefault=!1}),f(i))},[I,v,g,i]),(0,y.useEffect)(()=>{g.length&&v&&(v.close(),(async()=>{switch(s){case"simpleImage":let e=1,o=0;for(let n=0;n<g.length;n++){let i=g[n];if(t){let e=new Image;e.src=i,await e.decode(),P(t=>[...t,{width:null==e?void 0:e.width,height:null==e?void 0:e.height}])}try{if(0!==n){let t=(await V(v.world,n)).getBounds();o=t.x+t.width,e=t.height}v.addSimpleImage({url:i,x:o,y:0,height:e,success:()=>{h(e=>[...e,i]),"function"==typeof A&&A({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(e){console.error("Failed to load image at ".concat(i,":"),e)}}break;case"tiledImage":{let e=1,t=0;for(let o=0;o<g.length;o++){let n=g[o];try{let i=await M(()=>(0,m.Er)(n),3,1e3);if(!i)throw Error("No tile source for ".concat(n));if(0!==o){let n=(await V(v.world,o)).getBounds();t=n.x+n.width,e=n.height}v.addTiledImage({tileSource:i,x:t,y:0,height:e,success:()=>{h(e=>[...e,n]),"function"==typeof A&&A({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(e){console.error("Failed to load tile at ".concat(n,":"),e)}}break}default:console.warn('Unsupported imageType: "'.concat(s,'"'))}})().catch(e=>console.error("Error drawing tiles",e)))},[g,s,v]),(0,y.useEffect)(()=>{if(d){let e=0,t=()=>{if(e<3){let o=null==v?void 0:v.world.getHomeBounds();o&&(null==v||v.viewport.fitBounds(o,!0)),e++,setTimeout(t,50)}};t(),null==v||v.addHandler("canvas-click",e=>{let t=null==v?void 0:v.getOverlayById(e.originalTarget.id);if(t){let o=null==t?void 0:t.getBounds(v.viewport);return o.x-=.1,o.y-=.1,o.width+=.2,o.height+=.2,null==v||v.viewport.fitBounds(o,!1),e.preventDefaultAction=!0}})}},[d]),(0,y.useEffect)(()=>{t&&(null==v||v.clearOverlays(),t.forEach(e=>{var t,o,n,i;let{annotation:r,targetIndex:a}=e,s=(null==v?void 0:null===(o=v.viewport)||void 0===o?void 0:null===(t=o.getBounds())||void 0===t?void 0:t.width)||1,c=null==v?void 0:v.world.getItemAt(a),d=c?(null==c?void 0:c.getBounds().width)/(null==c?void 0:c.getContentSize().x):(null===(n=C[a])||void 0===n?void 0:n.width)/s,m=(0,u.LV)(null==r?void 0:r.target),h=(null==r?void 0:r.body)?null==r?void 0:null===(i=r.body[0])||void 0===i?void 0:i.value:void 0;if(null==m?void 0:m.rect){let{x:e,y:t,w:o,h:n}=null==m?void 0:m.rect,i=function(e,t,o){let n=e*o;if(0===t)return n;for(;t>0;){let e=null==v?void 0:v.world.getItemAt(t-1);if(e)n+=e.getBounds().width,t--;else break}return n}(e,a,d),s=new(l()).Rect(i,t*d,o*d,n*d),c=document.createElement("button");if(c.classList.add("clover-iiif-image-openseadragon-annotation"),c.id=r.id,c.setAttribute("tabindex","0"),c.setAttribute("role","button"),c.setAttribute("data-active","true"),c.setAttribute("tabindex","0"),c.setAttribute("role","button"),c.setAttribute("data-active","false"),h){c.setAttribute("aria-label",h);let e=document.createElement("label");e.innerHTML=h,c.appendChild(e)}c.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()}),c.addEventListener("touchstart",e=>{e.stopPropagation(),e.preventDefault()}),c.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault()}),c.addEventListener("keydown",e=>{if("Enter"===e.key){e.stopPropagation(),e.preventDefault();let t=new(l()).Rect(s.x-.1,s.y-.1,s.width+.2,s.height+.2);null==v||v.viewport.fitBounds(t,!1)}}),c.addEventListener("focus",()=>{c.setAttribute("data-active","true")}),c.addEventListener("mouseover",()=>{c.setAttribute("data-active","true")}),c.addEventListener("mouseout",()=>{c.removeAttribute("data-active")}),c.addEventListener("blur",()=>{c.removeAttribute("data-active")}),null==v||v.addOverlay(c,s,l().Placement.CENTER)}}),k())},[d,t]),(0,r.jsxs)(w,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":n.id,hasNavigator:n.showNavigator,children:[(0,r.jsx)(O,{_cloverViewerHasPlaceholder:a,config:n}),n.showNavigator&&(0,r.jsx)(b,{id:n.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),(0,r.jsx)(S,{id:n.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...o&&{"aria-label":o}})]})},_=o(4610),z=o(7632),F=e=>{let{_cloverViewerHasPlaceholder:t=!1,annotations:o,body:n,instanceId:a,isTiledImage:l=!1,label:s,src:c="",openSeadragonCallback:d,openSeadragonConfig:u={}}=e,m=null!=a?a:(0,z.Z)(),p="string"==typeof s?s:(0,_.M)(s),b={id:"openseadragon-".concat(m),navigatorId:"openseadragon-navigator-".concat(m),loadTilesWithAjax:!0,fullPageButton:"fullPage-".concat(m),homeButton:"reset-".concat(m),rotateLeftButton:"rotateLeft-".concat(m),rotateRightButton:"rotateRight-".concat(m),zoomInButton:"zoomIn-".concat(m),zoomOutButton:"zoomOut-".concat(m),showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...u},S=Array.isArray(n)?n:n?[n]:[],w=Array.isArray(c)?c:c?[c]:[],y=[],x=i.SimpleImage;if(S.length){let e=S.map(h);y=e.map(e=>e.uri).filter(Boolean),x=e.some(e=>e.imageType===i.TiledImage)?i.TiledImage:i.SimpleImage}else if(w.length){let e=w.map(e=>g(e,l));y=e.map(e=>e.uri).filter(Boolean),x=e.some(e=>e.imageType===i.TiledImage)?i.TiledImage:i.SimpleImage}return y.length?(0,r.jsx)(f.SV,{FallbackComponent:v.Z,children:(0,r.jsx)(E,{_cloverViewerHasPlaceholder:t,annotations:o,ariaLabel:p,config:b,imageType:x,uri:y,openSeadragonCallback:e=>{null==d||d(e)}},m)}):null}},2641:function(e,t,o){o.d(t,{Z:function(){return s}});var n=o(5893),i=o(6216);let r=(0,i.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center"}),a=(0,i.zo)("p",{fontWeight:"bold",fontSize:"x-large"}),l=(0,i.zo)("span",{fontSize:"medium"});o(7294);var s=e=>{let{error:t}=e,{message:o}=t;return(0,n.jsxs)(r,{role:"alert",children:[(0,n.jsx)(a,{"data-testid":"headline",children:"Something went wrong"}),o&&(0,n.jsxs)(l,{children:["Error message: ".concat(o)," "]})]})}},9176:function(e,t,o){o.d(t,{Cu:function(){return x},D1:function(){return y},MY:function(){return w},W2:function(){return v},as:function(){return h}});var n,i,r=o(5893),a=o(7294),l=o(8013),s=o(1751),c=o(7632);let d={behavior:"smooth",block:"center"},u={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},annotations:{motivations:void 0},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},crossOrigin:"anonymous",ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:d}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function e(t){return Array.isArray(t)?t.map(t=>e(t)):t&&"object"==typeof t?Object.entries(t).reduce((t,o)=>{let[n,i]=o;return t[n]=e(i),t},{}):t}(e)};function h(e){var t,o;let n=(null==u?void 0:null===(o=u.informationPanel)||void 0===o?void 0:null===(t=o.vtt)||void 0===t?void 0:t.autoScroll)||{enabled:!0,settings:d};if(null==e)return{enabled:n.enabled,settings:{...n.settings}};if("boolean"==typeof e)return{enabled:e,settings:{...n.settings}};if("enabled"in e)return{enabled:e.enabled,settings:{...e.settings}};let i={enabled:!0,settings:{...e}};return function(e){let{behavior:t,block:o}=e,n=["auto","instant","smooth"],i=["center","end","nearest","start"];if(!n.includes(t))throw TypeError("'".concat(t,"' not in ").concat(n.join(" | ")));if(!i.includes(o))throw TypeError("'".concat(o,"' not in ").concat(i.join(" | ")))}(i.settings),i}let g=h(null==u?void 0:null===(i=u.informationPanel)||void 0===i?void 0:null===(n=i.vtt)||void 0===n?void 0:n.autoScroll),f=()=>{var e,t;return{activeCanvas:"",activeManifest:"",activePlayer:null,activeSelector:void 0,OSDImageLoaded:!1,collection:{},configOptions:m(),customDisplays:[],plugins:[],isAutoScrollEnabled:g.enabled,isAutoScrolling:!1,isInformationOpen:null===(t=null==u?void 0:null===(e=u.informationPanel)||void 0===e?void 0:e.open)||void 0===t||t,isLoaded:!1,isPaged:!1,isUserScrolling:void 0,sequence:[[],[]],vault:new l.j,viewingDirection:"left-to-right",openSeadragonViewer:null,viewerId:(0,c.Z)(),visibleCanvases:[],visibleAnnotations:[]}},v=f(),p=a.createContext(v),b=a.createContext(v);function S(e,t){switch(t.type){case"updateActiveCanvas":return t.canvasId||(t.canvasId=""),{...e,activeCanvas:t.canvasId};case"updateActiveManifest":return{...e,activeManifest:t.manifestId};case"updateActivePlayer":return{...e,activePlayer:t.player};case"updateOSDImageLoaded":return{...e,OSDImageLoaded:t.OSDImageLoaded};case"updateAutoScrollAnnotationEnabled":return{...e,isAutoScrollEnabled:t.isAutoScrollEnabled};case"updateAutoScrolling":return{...e,isAutoScrolling:t.isAutoScrolling};case"updateCollection":return{...e,collection:t.collection};case"updateConfigOptions":{let o=(0,s.RH)(m(e.configOptions),t.configOptions);return{...e,configOptions:o}}case"updateContentStateAnnotation":return{...e,contentStateAnnotation:t.contentStateAnnotation};case"updateInformationOpen":return{...e,isInformationOpen:t.isInformationOpen};case"updateInformationPanelResource":return{...e,informationPanelResource:t.informationPanelResource};case"updateIsLoaded":return{...e,isLoaded:t.isLoaded};case"updateManifestSequence":return{...e,sequence:t.sequence};case"updateUserScrolling":return{...e,isUserScrolling:t.isUserScrolling};case"updateOpenSeadragonViewer":return{...e,openSeadragonViewer:t.openSeadragonViewer};case"updateViewerId":return{...e,viewerId:t.viewerId};case"updateActiveSelector":return{...e,activeSelector:t.selector};case"updateVisibleCanvases":return{...e,visibleCanvases:t.visibleCanvases};case"updateViewingDirection":return{...e,viewingDirection:t.viewingDirection};case"updateIsPaged":return{...e,isPaged:t.isPaged};default:throw Error("Unhandled action type: ".concat(t.type))}}let w=e=>{let{initialState:t,children:o}=e,[n,i]=(0,a.useReducer)(S,t,e=>{if(e){var t,o;return{...e,configOptions:m(null!==(t=e.configOptions)&&void 0!==t?t:u),viewerId:null!==(o=e.viewerId)&&void 0!==o?o:(0,c.Z)()}}return f()}),{openSeadragonViewer:l}=n;return(0,a.useEffect)(()=>{if(l)return l.addHandler("update-viewport",()=>{let e=l.viewport,t=e.getBounds(),o=e.viewportToImageRectangle(t),n=[Math.round(o.x),Math.round(o.y),Math.round(o.width),Math.round(o.height)];i({type:"updateActiveSelector",selector:{type:"FragmentSelector",value:"xywh=".concat(n.join(","))}})}),()=>{l.removeAllHandlers("update-viewport")}},[l]),(0,r.jsx)(p.Provider,{value:n,children:(0,r.jsx)(b.Provider,{value:i,children:o})})};function y(){let e=a.useContext(p);if(void 0===e)throw Error("useViewerState must be used within a ViewerProvider");return e}function x(){let e=a.useContext(b);if(void 0===e)throw Error("useViewerDispatch must be used within a ViewerProvider");return e}},1038:function(e,t,o){o.d(t,{AR:function(){return h},eT:function(){return b}});var n=o(5059),i=o(6609),r=o(7421),a=o(1005),l=JSON.parse('{"commonClose":"Cerrar","commonNext":"Siguiente","commonOpen":"Abrir","commonPrevious":"Anterior","commonSearch":"Buscar","commonSearchPlaceholder":"Buscar...","commonShare":"Compartir","commonViewAll":"Ver todo","copyFailure":"Fallido","copySuccess":"Copiado","contentSearchLoading":"Cargando...","contentSearchPlaceholder":"Buscar","contentSearchResultsNone":"Sin resultados","contentSearchResultsMore":"M\xe1s resultados","imageFullScreen":"Pantalla completa","imageResetZoom":"Restablecer zoom","imageRotateLeft":"Girar a la izquierda","imageRotateRight":"Girar a la derecha","imageZoomIn":"Acercar","imageZoomOut":"Alejar","informationPanelTabs":"Seleccionar","informationPanelTabsClose":"Visor","informationPanelTabsAbout":"Acerca de","informationPanelTabsAnnotations":"Anotaciones","informationPanelTabsSearch":"Buscar","informationPanelToggle":"M\xe1s informaci\xf3n","shareCollectionJson":"Ver colecci\xf3n","shareCollectionCopy":"Copiar URL de la colecci\xf3n","shareManifestJson":"Ver manifiesto","shareManifestCopy":"Copiar URL del manifiesto"}'),s=JSON.parse('{"commonClose":"Sulje","commonNext":"Seuraava","commonPrevious":"Edellinen","commonSearch":"Hae","commonSearchPlaceholder":"Hae...","commonShare":"Jaa","commonViewAll":"N\xe4yt\xe4 kaikki","copyFailure":"Kopiointi ep\xe4onnistui","copySuccess":"Kopioitu","contentSearchLoading":"Ladataan...","contentSearchPlaceholder":"Haku","contentSearchResultsNone":"Ei osumia","contentSearchResultsMore":"Lis\xe4\xe4 osumia","informationPanelTabs":"Valitse","informationPanelTabsClose":"Katselu","informationPanelTabsAbout":"Tiedot","informationPanelTabsAnnotations":"Annotaatiot","informationPanelTabsSearch":"Haku","informationPanelToggle":"Lis\xe4tiedot","shareCollectionJson":"N\xe4yt\xe4 kokoelma","shareCollectionCopy":"Kopioi kokoelman osoite","shareManifestJson":"N\xe4yt\xe4 manifesti","shareManifestCopy":"Kopioi manifestin osoite"}'),c=JSON.parse('{"commonClose":"Fermer","commonNext":"Suivant","commonOpen":"Ouvrir","commonPrevious":"Pr\xe9c\xe9dent","commonSearch":"Rechercher","commonSearchPlaceholder":"Rechercher…","commonShare":"Partager","commonViewAll":"Tout afficher","copyFailure":"\xc9chec","copySuccess":"Copi\xe9","contentSearchLoading":"Chargement…","contentSearchPlaceholder":"Rechercher","contentSearchResultsNone":"Aucun r\xe9sultat","contentSearchResultsMore":"Plus de r\xe9sultats","imageFullScreen":"Plein \xe9cran","imageResetZoom":"R\xe9initialiser le zoom","imageRotateLeft":"Rotation \xe0 gauche","imageRotateRight":"Rotation \xe0 droite","imageZoomIn":"Zoom avant","imageZoomOut":"Zoom arri\xe8re","informationPanelTabs":"S\xe9lectionner","informationPanelTabsClose":"Visionneuse","informationPanelTabsAbout":"\xc0 propos","informationPanelTabsAnnotations":"Annotations","informationPanelTabsSearch":"Recherche","informationPanelToggle":"Plus d’informations","shareCollectionJson":"Afficher la collection","shareCollectionCopy":"Copier l’URL de la collection","shareManifestJson":"Afficher le manifeste","shareManifestCopy":"Copier l’URL du manifeste"}'),d=JSON.parse('{"commonClose":"Lukk","commonNext":"Neste","commonPrevious":"Forrige","commonSearch":"S\xf8k","commonSearchPlaceholder":"S\xf8k...","commonShare":"Del","commonViewAll":"Se alle","copyFailure":"Feilet","copySuccess":"Kopiert","contentSearchLoading":"Laster inn...","contentSearchPlaceholder":"S\xf8k","contentSearchResultsNone":"Ingen resultat","contentSearchResultsMore":"Flere resultat","informationPanelTabs":"Velg","informationPanelTabsClose":"Viewer","informationPanelTabsAbout":"Om","informationPanelTabsAnnotations":"Annoteringer","informationPanelTabsSearch":"S\xf8k","informationPanelToggle":"Mer informasjon","shareCollectionJson":"Se samlingen","shareCollectionCopy":"Kopi\xe9r samlingens URL","shareManifestJson":"Se manifestet","shareManifestCopy":"Kopi\xe9r manifestets URL"}'),u=JSON.parse('{"commonClose":"Lukk","commonNext":"Neste","commonPrevious":"F\xf8rre","commonSearch":"S\xf8k","commonSearchPlaceholder":"S\xf8k...","commonShare":"Del","commonViewAll":"Sj\xe5 alle","copyFailure":"Feila","copySuccess":"Kopiert","contentSearchLoading":"Laster inn...","contentSearchPlaceholder":"S\xf8k","contentSearchResultsNone":"Ingen resultat","contentSearchResultsMore":"Fleire resultat","informationPanelTabs":"Vel","informationPanelTabsClose":"Viewer","informationPanelTabsAbout":"Om","informationPanelTabsAnnotations":"Annoteringa","informationPanelTabsSearch":"S\xf8k","informationPanelToggle":"Meir informasjon","shareCollectionJson":"Sj\xe5 samlinga","shareCollectionCopy":"Kopi\xe9r samlingas URL","shareManifestJson":"Sj\xe5 manifestet","shareManifestCopy":"Kopi\xe9r manifestets URL"}'),m=JSON.parse('{"commonClose":"Lukk","commonNext":"Neste","commonPrevious":"Forrige","commonSearch":"S\xf8k","commonSearchPlaceholder":"S\xf8k...","commonShare":"Del","commonViewAll":"Se alle","copyFailure":"Feilet","copySuccess":"Kopiert","contentSearchLoading":"Laster inn...","contentSearchPlaceholder":"S\xf8k","contentSearchResultsNone":"Ingen resultat","contentSearchResultsMore":"Flere resultat","informationPanelTabs":"Velg","informationPanelTabsClose":"Viewer","informationPanelTabsAbout":"Om","informationPanelTabsAnnotations":"Annoteringer","informationPanelTabsSearch":"S\xf8k","informationPanelToggle":"Mer informasjon","shareCollectionJson":"Se samlingen","shareCollectionCopy":"Kopi\xe9r samlingens URL","shareManifestJson":"Se manifestet","shareManifestCopy":"Kopi\xe9r manifestets URL"}');let h="clover",g=Object.fromEntries(Object.entries({en:a,es:l,fi:s,fr:c,nb:d,nn:u,no:m,pt:{}}).map(e=>{let[t,o]=e;return[t,{[h]:o}]})),f={defaultNS:h,fallbackLng:"en",ns:[h],resources:{...g}},v=(e,t)=>({...e||{},...t||{}}),p=!1;function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p)!function(e){if(e){for(let[t,o]of Object.entries(e))if(o)for(let[e,n]of Object.entries(o))n&&i.ZP.addResourceBundle(t,e,n,!0,!0)}}(e.resources),e.lng&&i.ZP.changeLanguage(e.lng),e.fallbackLng&&(i.ZP.options.fallbackLng=e.fallbackLng);else{var t,o,a;let l=v(f.resources,e.resources);i.ZP.use(n.Z).use(r.Db).init({...f,...e,resources:l,ns:null!==(t=e.ns)&&void 0!==t?t:f.ns,defaultNS:null!==(o=e.defaultNS)&&void 0!==o?o:f.defaultNS,fallbackLng:null!==(a=e.fallbackLng)&&void 0!==a?a:f.fallbackLng}),p=!0}return i.ZP}b()},9365:function(e,t,o){o.d(t,{L:function(){return l}});var n=o(7294),i=o(7421),r=o(1005),a=o(1038);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.AR,t=(0,i.$G)(e),{t:o}=t,l=(0,n.useCallback)((e,t)=>{let n=o(e,t);if("string"!=typeof n||n===e){var i;return null!==(i=r[e])&&void 0!==i?i:e}return n},[o]);return{...t,t:l}}},404:function(e,t,o){o.d(t,{LV:function(){return i},R6:function(){return r},S1:function(){return l},bw:function(){return a},j9:function(){return n},ki:function(){return s}});let n=e=>{var t;return e&&["ar","fa","ur","ps","dv","sd","ug","ku","he","yi","jrb","jpr","nqo"].includes(Array.isArray(e)?null===(t=e[0])||void 0===t?void 0:t.split("-")[0]:null==e?void 0:e.split("-")[0])?"RTL":"LTR"},i=e=>{let t={id:"string"==typeof e?e:e.source};if("string"==typeof e){if(e.includes("#xywh=")){let o=e.split("#xywh=");if(o&&o[1]){let[e,n,i,r]=o[1].split(",").map(e=>Number(e));t={id:o[0],rect:{x:e,y:n,w:i,h:r}}}}else if(e.includes("#t=")){let o=e.split("#t=");o&&o[1]&&(t={id:o[0],t:o[1]})}}else if("object"==typeof e){var o,n,i,r,a;if((null===(o=e.selector)||void 0===o?void 0:o.type)==="PointSelector")t={id:e.source,point:{x:e.selector.x,y:e.selector.y}};else if((null===(n=e.selector)||void 0===n?void 0:n.type)==="SvgSelector")t={id:e.source,svg:e.selector.value};else if((null===(i=e.selector)||void 0===i?void 0:i.type)==="FragmentSelector"&&(null===(r=e.selector)||void 0===r?void 0:r.value.includes("xywh="))&&"Canvas"==e.source.type&&e.source.id){let o=null===(a=e.selector)||void 0===a?void 0:a.value.split("xywh=");if(o&&o[1]){let[n,i,r,a]=o[1].split(",").map(e=>Number(e));t={id:e.source.id,rect:{x:n,y:i,w:r,h:a}}}}}return t},r=(e,t)=>(null==e?void 0:e.body)?(Array.isArray(e.body)?e.body:[e.body]).map(e=>{if(e){if("string"==typeof e)return null==t?void 0:t.get(e);if("object"==typeof e){if("value"in e||"language"in e||(null==e?void 0:e.type)==="TextualBody")return e;let o=e.id;if(o&&t)return t.get(o)}}}).filter(e=>!!e):[];function a(e,t){var o;if(!e)return!1;if(!t)return!0;if(0===t.length)return!1;let n=(o=e.motivation)?Array.isArray(o)?o:[o]:[];return 0!==n.length&&n.some(e=>t.includes(e))}function l(e,t){return e&&0!==e.length?t?0===t.length?[]:e.filter(e=>a(e,t)):e.filter(Boolean):[]}function s(e,t){if(!e||0===e.length)return[];let o=new Set,n=e=>{if(e){if(Array.isArray(e)){e.forEach(n);return}"string"==typeof e&&o.add(e)}};return!function e(t){Array.isArray(t)?t.forEach(e):t&&"object"==typeof t&&("language"in t&&n(t.language),Object.values(t).forEach(e))}(t?e.map(e=>{let o=r(e,t);return o.length?{...e,body:o}:e}):e),Array.from(o)}},9626:function(e,t,o){o.d(t,{AG:function(){return l},Er:function(){return a},FO:function(){return m},Vu:function(){return u},jp:function(){return s},nG:function(){return h}});var n=o(8558),i=o(9290);let r=e=>(Array.isArray(e["@context"])?e["@context"]:[e["@context"]]).map(e=>null==e?void 0:e.replace("http://","https://")),a=e=>fetch("".concat(e.replace(/\/$/,""),"/info.json")).then(e=>e.json()).then(e=>e).catch(t=>{console.error("The IIIF tilesource ".concat(e.replace(/\/$/,""),"/info.json failed to load: ").concat(t))}),l=e=>{let t,o;return Array.isArray(e)&&(t=e[0])&&(o="@id"in t?t["@id"]:t.id),o},s=e=>{var t,o,n,i,r,a,l,s,c,d,u,m,h,g,f;let v;let p={};switch(null==e?void 0:e.type){case"SpecificResource":p={manifest:v=null==e?void 0:null===(n=e.target)||void 0===n?void 0:null===(o=n.partOf)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.id,canvas:null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.id},(null==e?void 0:e.selector)&&(p.selector=e.selector);break;case"Range":case"Annotation":let b=(null==e?void 0:null===(r=e.target)||void 0===r?void 0:r.source)||(null==e?void 0:e.target),S=null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.selector;p={manifest:null==b?void 0:null===(s=b.partOf)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.id,canvas:null==b?void 0:b.id},(null==e?void 0:null===(c=e.target)||void 0===c?void 0:c.type)==="SpecificResource"?p.selector=S:(null==e?void 0:null===(d=e.target)||void 0===d?void 0:d.selector)&&(p.selector=S);break;case"Canvas":if(p={manifest:v=null==e?void 0:null===(m=e.partOf)||void 0===m?void 0:null===(u=m[0])||void 0===u?void 0:u.id,canvas:null==e?void 0:e.id},null==e?void 0:null===(h=e.id)||void 0===h?void 0:h.includes("#xywh=")){let[t,o]=e.id.split("#xywh=");p.canvas=t,p.selector={type:"FragmentSelector",value:"xywh=".concat(o)}}break;case"Manifest":v=null==e?void 0:e.id,p={collection:null==e?void 0:null===(f=e.partOf)||void 0===f?void 0:null===(g=f[0])||void 0===g?void 0:g.id,manifest:null==e?void 0:e.id};break;case"Collection":p={collection:v=null==e?void 0:e.id}}return{resourceId:v,active:p}},c=e=>{let t=["https://iiif.io/api/presentation/2/context.json","https://iiif.io/api/presentation/3/context.json"],o=TypeError("The IIIF content may not be a valid IIIF resource: ".concat(t.join(", ")));e["@context"]||console.warn(o);let i=r(e);try{if(i.includes(t[0])){let t=(0,n.ki)(e);if(!t||!t.id||!t.type)throw o;return t}if(i.includes(t[1]))return e;throw o}catch(e){console.warn(e)}},d=e=>{if("string"==typeof e&&g(e))return{resourceId:e};if("object"==typeof e){let t=c(e);return{resourceId:null==t?void 0:t.id,resourceObject:t}}{let t=JSON.parse((0,i.o0)(e)),{active:o}=s(t);return{active:o,resourceId:null==t?void 0:t.resourceId,resourceObject:t}}},u=e=>{let{resourceId:t,resourceObject:o}=d(e);return o||t},m=e=>e.items.map(e=>e.id)[0],h=e=>{let t=e.items.filter(e=>"Manifest"===e.type).map(e=>e.id);return 0==t.length?null:t[0]},g=e=>{try{new URL(e)}catch(e){return!1}return!0}},1005:function(e){e.exports=JSON.parse('{"commonClose":"Close","commonNext":"Next","commonOpen":"Open","commonPrevious":"Previous","commonSearch":"Search","commonSearchPlaceholder":"Search...","commonShare":"Share","commonViewAll":"View All","copyFailure":"Failed","copySuccess":"Copied","contentSearchLoading":"Loading...","contentSearchPlaceholder":"Search","contentSearchResultsNone":"No Results","contentSearchResultsMore":"More Results","imageFullScreen":"Full screen","imageResetZoom":"Reset zoom","imageRotateLeft":"Rotate left","imageRotateRight":"Rotate right","imageZoomIn":"Zoom in","imageZoomOut":"Zoom out","informationPanelTabs":"Select","informationPanelTabsClose":"Viewer","informationPanelTabsAbout":"About","informationPanelTabsAnnotations":"Annotations","informationPanelTabsSearch":"Search","informationPanelToggle":"More Information","shareCollectionJson":"View Collection","shareCollectionCopy":"Copy Collection URL","shareManifestJson":"View Manifest","shareManifestCopy":"Copy Manifest URL"}')}}]);