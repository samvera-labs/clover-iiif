"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{3002:function(e,t,o){o.d(t,{c:function(){return n}});let n=(0,o(2266).zo)("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}})},2823:function(e,t,o){o.r(t),o.d(t,{default:function(){return A}});var n=o(2676),i=o(8687),r=o(7467),a=o(5143),l=o(2266);let s=(0,l.zo)("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),c=(0,l.zo)("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),d=(0,l.zo)("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{["".concat(s)]:{display:"block"}},false:{["".concat(s)]:{display:"none"}}}}});var u=o(9212),v=o.n(u),h=o(5271),g=o(2522),f=o(3002),p=e=>{let{className:t,id:o,label:i,children:r}=e,a=i.toLowerCase().replace(/\s/g,"-");return(0,n.jsx)(f.c,{id:o,className:t,"data-testid":"openseadragon-button","data-button":a,children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"".concat(o,"-svg-title"),"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,n.jsx)("title",{id:"".concat(o,"-svg-title"),children:i}),r]})})};let m=(0,l.zo)("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),w=()=>(0,n.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),y=()=>(0,n.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),x=()=>(0,n.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),b=()=>(0,n.jsx)("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),S=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),(0,n.jsx)("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})]});var I=e=>{let{_cloverViewerHasPlaceholder:t,config:o}=e,{activeCanvas:i,plugins:r,vault:a,openSeadragonViewer:l}=(0,g.D1)(),s=a.get({id:i,type:"Canvas"});return(0,h.useEffect)(()=>{if(!l)return;let e=l.viewport.getRotation();l.addHandler("home",()=>{l.viewport.setRotation(e)})},[l]),(0,n.jsxs)(m,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:t,children:[o.showZoomControl&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{id:o.zoomInButton,label:"zoom in",children:(0,n.jsx)(w,{})}),(0,n.jsx)(p,{id:o.zoomOutButton,label:"zoom out",children:(0,n.jsx)(y,{})})]}),o.showFullPageControl&&(0,n.jsx)(p,{id:o.fullPageButton,label:"full page",children:(0,n.jsx)(x,{})}),o.showRotationControl&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{id:o.rotateRightButton,label:"rotate right",children:(0,n.jsx)(S,{})}),(0,n.jsx)(p,{id:o.rotateLeftButton,label:"rotate left",children:(0,n.jsx)(S,{})})]}),o.showHomeControl&&(0,n.jsx)(p,{id:o.homeButton,label:"reset",children:(0,n.jsx)(b,{})}),r.filter(e=>{var t;return null===(t=e.imageViewer)||void 0===t?void 0:t.controls}).map((e,t)=>{var o,i,r,a;let l=null===(i=e.imageViewer)||void 0===i?void 0:null===(o=i.controls)||void 0===o?void 0:o.component;return(0,n.jsx)(l,{...null==e?void 0:null===(a=e.imageViewer)||void 0===a?void 0:null===(r=a.controls)||void 0===r?void 0:r.componentProps,canvas:s,useViewerDispatch:g.Cu,useViewerState:g.D1},t)})]})},C=o(8905);async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;try{return await e()}catch(n){if(t<=0)throw n;return await new Promise(e=>setTimeout(e,o)),k(e,t-1,o)}}let j=e=>new Promise(t=>setTimeout(t,e)),_=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;for(let i=0;i<o;i++){let o=t?t-1:0,i=e.getItemAt(o);if(i)return i;await j(n)}throw Error("No base item found at index 0 after retries")};var L=e=>{let{ariaLabel:t,config:o,uri:i,_cloverViewerHasPlaceholder:r,imageType:a,openSeadragonCallback:l}=e,[u,f]=(0,h.useState)([]),[p,m]=(0,h.useState)([]),[w,y]=(0,h.useState)(),x=(0,g.Cu)(),b=(0,h.useRef)(!1);return(0,h.useEffect)(()=>(b.current||(b.current=!0,w||y(v()(o))),()=>null==w?void 0:w.destroy()),[]),(0,h.useEffect)(()=>{w&&l&&l(w)},[w,l]),(0,h.useEffect)(()=>{w&&JSON.stringify(i)!==JSON.stringify(p)&&(w.forceRedraw(),m(i))},[w,p,i]),(0,h.useEffect)(()=>{p.length&&w&&(w.close(),(async()=>{switch(a){case"simpleImage":let e=1,t=0;for(let o=0;o<p.length;o++){let n=p[o];try{if(0!==o){let n=(await _(w.world,o)).getBounds();t=n.x+n.width,e=n.height}w.addSimpleImage({url:n,x:t,y:0,height:e,success:()=>{"function"==typeof x&&x({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}}),f(e=>[...e,n])}catch(e){console.error("Failed to load image at ".concat(n,":"),e)}}break;case"tiledImage":{let e=1,t=0;for(let o=0;o<p.length;o++){let n=p[o];try{let i=await k(()=>(0,C.Er)(n),3,1e3);if(!i)throw Error("No tile source for ".concat(n));if(0!==o){let n=(await _(w.world,o)).getBounds();t=n.x+n.width,e=n.height}w.addTiledImage({tileSource:i,x:t,y:0,height:e,success:()=>{"function"==typeof x&&x({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}}),f(e=>[...e,n])}catch(e){console.error("Failed to load tile at ".concat(n,":"),e)}}break}default:console.warn('Unsupported imageType: "'.concat(a,'"'))}})().catch(e=>console.error("Error drawing tiles",e)))},[p,a,w]),(0,h.useEffect)(()=>{if(u){let e=0,t=()=>{if(e<3){let o=null==w?void 0:w.world.getHomeBounds();o&&(null==w||w.viewport.fitBounds(o,!0)),e++,setTimeout(t,50)}};t()}},[u]),(0,n.jsxs)(d,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":o.id,hasNavigator:o.showNavigator,children:[(0,n.jsx)(I,{_cloverViewerHasPlaceholder:r,config:o}),o.showNavigator&&(0,n.jsx)(s,{id:o.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),(0,n.jsx)(c,{id:o.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...t&&{"aria-label":t}})]})},O=o(2014),z=o(4924),H=o(2950),A=e=>{let{_cloverViewerHasPlaceholder:t=!1,body:o,instanceId:l,isTiledImage:s=!1,label:c,src:d="",openSeadragonCallback:u,openSeadragonConfig:v={}}=e,h=null!=l?l:(0,H.Z)(),g="string"==typeof c?c:(0,z.M)(c),f={id:"openseadragon-".concat(h),navigatorId:"openseadragon-navigator-".concat(h),loadTilesWithAjax:!0,fullPageButton:"fullPage-".concat(h),homeButton:"reset-".concat(h),rotateLeftButton:"rotateLeft-".concat(h),rotateRightButton:"rotateRight-".concat(h),zoomInButton:"zoomIn-".concat(h),zoomOutButton:"zoomOut-".concat(h),showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...v},p=Array.isArray(o)?o:o?[o]:[],m=Array.isArray(d)?d:d?[d]:[],w=[],y=O.H.SimpleImage;if(p.length){let e=p.map(i.z9);w=e.map(e=>e.uri).filter(Boolean),y=e.some(e=>e.imageType===O.H.TiledImage)?O.H.TiledImage:O.H.SimpleImage}else if(m.length){let e=m.map(e=>(0,i.D1)(e,s));w=e.map(e=>e.uri).filter(Boolean),y=e.some(e=>e.imageType===O.H.TiledImage)?O.H.TiledImage:O.H.SimpleImage}return w.length?(0,n.jsx)(r.SV,{FallbackComponent:a.Z,children:(0,n.jsx)(L,{_cloverViewerHasPlaceholder:t,ariaLabel:g,config:f,imageType:y,uri:w,openSeadragonCallback:u},h)}):null}},5143:function(e,t,o){o.d(t,{Z:function(){return s}});var n=o(2676),i=o(2266);let r=(0,i.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center"}),a=(0,i.zo)("p",{fontWeight:"bold",fontSize:"x-large"}),l=(0,i.zo)("span",{fontSize:"medium"});o(5271);var s=e=>{let{error:t}=e,{message:o}=t;return(0,n.jsxs)(r,{role:"alert",children:[(0,n.jsx)(a,{"data-testid":"headline",children:"Something went wrong"}),o&&(0,n.jsxs)(l,{children:["Error message: ".concat(o)," "]})]})}},2522:function(e,t,o){o.d(t,{Cu:function(){return x},D1:function(){return y},MY:function(){return w},W2:function(){return g},as:function(){return v}});var n,i,r,a=o(2676),l=o(5271),s=o(8177),c=o(5346),d=o(2950);let u={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},crossOrigin:void 0,ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1,localeText:{contentSearch:{tabLabel:"Search Results",formPlaceholder:"Enter search words",noSearchResults:"No search results",loading:"Loading...",moreResults:"more results"}}};function v(e){let t={...u.informationPanel.vtt.autoScroll};return"object"==typeof e&&(t="enabled"in e?e:{enabled:!0,settings:e}),!1===e&&(t.enabled=!1),function(e){let{behavior:t,block:o}=e,n=["auto","instant","smooth"],i=["center","end","nearest","start"];if(!n.includes(t))throw TypeError("'".concat(t,"' not in ").concat(n.join(" | ")));if(!i.includes(o))throw TypeError("'".concat(o,"' not in ").concat(i.join(" | ")))}(t.settings),t}let h=v(null==u?void 0:null===(i=u.informationPanel)||void 0===i?void 0:null===(n=i.vtt)||void 0===n?void 0:n.autoScroll),g={activeCanvas:"",activeManifest:"",activeSelector:void 0,OSDImageLoaded:!1,collection:{},configOptions:u,customDisplays:[],plugins:[],isAutoScrollEnabled:h.enabled,isAutoScrolling:!1,isInformationOpen:null==u?void 0:null===(r=u.informationPanel)||void 0===r?void 0:r.open,isLoaded:!1,isUserScrolling:void 0,sequence:[[],[]],vault:new s.j,contentSearchVault:new s.j,openSeadragonViewer:null,viewerId:(0,d.Z)()},f=l.createContext(g),p=l.createContext(g);function m(e,t){switch(t.type){case"updateActiveCanvas":return t.canvasId||(t.canvasId=""),{...e,activeCanvas:t.canvasId};case"updateActiveManifest":return{...e,activeManifest:t.manifestId};case"updateOSDImageLoaded":return{...e,OSDImageLoaded:t.OSDImageLoaded};case"updateAutoScrollAnnotationEnabled":return{...e,isAutoScrollEnabled:t.isAutoScrollEnabled};case"updateAutoScrolling":return{...e,isAutoScrolling:t.isAutoScrolling};case"updateCollection":return{...e,collection:t.collection};case"updateConfigOptions":return{...e,configOptions:(0,c.RH)(e.configOptions,t.configOptions)};case"updateInformationOpen":return{...e,isInformationOpen:t.isInformationOpen};case"updateIsLoaded":return{...e,isLoaded:t.isLoaded};case"updateManifestSequence":return{...e,sequence:t.sequence};case"updateUserScrolling":return{...e,isUserScrolling:t.isUserScrolling};case"updateOpenSeadragonViewer":return{...e,openSeadragonViewer:t.openSeadragonViewer};case"updateViewerId":return{...e,viewerId:t.viewerId};case"updateActiveSelector":return{...e,activeSelector:t.selector};default:throw Error("Unhandled action type: ".concat(t.type))}}let w=e=>{let{initialState:t=g,children:o}=e,[n,i]=(0,l.useReducer)(m,t);return(0,a.jsx)(f.Provider,{value:n,children:(0,a.jsx)(p.Provider,{value:i,children:o})})};function y(){let e=l.useContext(f);if(void 0===e)throw Error("useViewerState must be used within a ViewerProvider");return e}function x(){let e=l.useContext(p);if(void 0===e)throw Error("useViewerDispatch must be used within a ViewerProvider");return e}},8803:function(e,t,o){o.d(t,{LV:function(){return i},j9:function(){return n},ki:function(){return r}});let n=e=>["ar","fa","ur","ps","dv","sd","ug","ku","he","yi","jrb","jpr","nqo"].includes(e.split("-")[0])?"RTL":"LTR",i=e=>{let t={id:"string"==typeof e?e:e.source};if("string"==typeof e){if(e.includes("#xywh=")){let o=e.split("#xywh=");if(o&&o[1]){let[e,n,i,r]=o[1].split(",").map(e=>Number(e));t={id:o[0],rect:{x:e,y:n,w:i,h:r}}}}else if(e.includes("#t=")){let o=e.split("#t=");o&&o[1]&&(t={id:o[0],t:o[1]})}}else if("object"==typeof e){var o,n,i,r,a;if((null===(o=e.selector)||void 0===o?void 0:o.type)==="PointSelector")t={id:e.source,point:{x:e.selector.x,y:e.selector.y}};else if((null===(n=e.selector)||void 0===n?void 0:n.type)==="SvgSelector")t={id:e.source,svg:e.selector.value};else if((null===(i=e.selector)||void 0===i?void 0:i.type)==="FragmentSelector"&&(null===(r=e.selector)||void 0===r?void 0:r.value.includes("xywh="))&&"Canvas"==e.source.type&&e.source.id){let o=null===(a=e.selector)||void 0===a?void 0:a.value.split("xywh=");if(o&&o[1]){let[n,i,r,a]=o[1].split(",").map(e=>Number(e));t={id:e.source.id,rect:{x:n,y:i,w:r,h:a}}}}}return t};function r(e){let t=new Set;return!function e(o){Array.isArray(o)?o.forEach(e):o&&"object"==typeof o&&(o.language&&t.add(o.language),Object.values(o).forEach(e))}(e),Array.from(t)}},8905:function(e,t,o){o.d(t,{AG:function(){return r},Er:function(){return i},FO:function(){return s},Mx:function(){return c},Vu:function(){return l},lE:function(){return d}});var n=o(7159);let i=e=>fetch("".concat(e.replace(/\/$/,""),"/info.json")).then(e=>e.json()).then(e=>e).catch(t=>{console.error("The IIIF tilesource ".concat(e.replace(/\/$/,""),"/info.json failed to load: ").concat(t))}),r=e=>{let t,o;return Array.isArray(e)&&(t=e[0])&&(o="@id"in t?t["@id"]:t.id),o},a=e=>{let t;let o={};if(u(e))t=e;else{var i,r,a,l,s,c,d,v,h,g,f,p,m,w,y;let u=JSON.parse((0,n.o0)(e));switch(null==u?void 0:u.type){case"SpecificResource":o={manifest:t=null==u?void 0:null===(a=u.target)||void 0===a?void 0:null===(r=a.partOf)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.id,canvas:null==u?void 0:null===(l=u.target)||void 0===l?void 0:l.id},(null==u?void 0:u.selector)&&(o.selector=u.selector);break;case"Range":case"Annotation":o={manifest:t=null==u?void 0:null===(d=u.target)||void 0===d?void 0:null===(c=d.partOf)||void 0===c?void 0:null===(s=c[0])||void 0===s?void 0:s.id,canvas:null==u?void 0:null===(v=u.target)||void 0===v?void 0:v.id},(null==u?void 0:null===(h=u.target)||void 0===h?void 0:h.type)==="SpecificResource"?o.selector=u.target.selector:(null==u?void 0:null===(g=u.target)||void 0===g?void 0:g.selector)&&(o.selector=u.target.selector);break;case"Canvas":if(o={manifest:t=null==u?void 0:null===(p=u.partOf)||void 0===p?void 0:null===(f=p[0])||void 0===f?void 0:f.id,canvas:null==u?void 0:u.id},null==u?void 0:null===(m=u.id)||void 0===m?void 0:m.includes("#xywh=")){let[e,t]=u.id.split("#xywh=");o.canvas=e,o.selector={type:"FragmentSelector",value:"xywh=".concat(t)}}break;case"Manifest":t=null==u?void 0:u.id,o={collection:null==u?void 0:null===(y=u.partOf)||void 0===y?void 0:null===(w=y[0])||void 0===w?void 0:w.id,manifest:null==u?void 0:u.id};break;case"Collection":o={collection:t=null==u?void 0:u.id}}}return{resourceId:t,active:o}},l=e=>{let{resourceId:t,active:o}=a(e);return o.collection||o.manifest||t},s=(e,t)=>{let o=t.items.map(e=>e.id),{active:n}=a(e),i=n.canvas;return o.includes(i)?i:o[0]},c=(e,t)=>{let{active:o}=a(e),n=o.manifest,i=t.items.filter(e=>"Manifest"===e.type).map(e=>e.id);return 0==i.length?null:i.includes(n)?n:i[0]},d=e=>{let{active:t}=a(e);return t.selector},u=e=>{try{new URL(e)}catch(e){return!1}return!0}},8687:function(e,t,o){o.d(t,{LW:function(){return y},zG:function(){return v},yO:function(){return x},$H:function(){return w},z9:function(){return f},D1:function(){return p},dH:function(){return m}});var n=o(9212),i=o.n(n);let r=window.OpenSeadragon;if(!r&&!(r=i()))throw Error("OpenSeadragon is missing.");let a="http://www.w3.org/2000/svg";r.Viewer&&(r.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new l(this)),this._svgOverlayInfo});let l=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(a,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(a,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};l.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new r.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),o=this._viewer.viewport.getRotation(),n=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,a=i*t,l=a;n&&(a=-a,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+a+","+l+") rotate("+o+")")},onClick:function(e,t){new r.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};let s=e=>new l(e);var c=o(8803),d=o(8905),u=o(2014);function v(e,t,o,n,r){if(!e)return;let a=1/t.width;n.forEach(t=>{if(!t.target)return;let{point:n,rect:l,svg:s}=(0,c.LV)(t.target);if(l){let{x:t,y:n,w:s,h:c}=l;!function(e,t,o,n,r,a,l){let s=new(i()).Rect(t,o,n,r),c=document.createElement("div");if(a){let{backgroundColor:e,opacity:t,borderType:o,borderColor:n,borderWidth:i}=a;c.style.backgroundColor=e,c.style.opacity=t,c.style.border="".concat(o," ").concat(i," ").concat(n),c.className=l}e.addOverlay(c,s)}(e,t*a,n*a,s*a,c*a,o,r)}if(n){let{x:t,y:i}=n;g(e,'\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="'.concat(t,'" cy="').concat(i,'" r="20" />\n        </svg>\n      '),o,a,r)}s&&g(e,s,o,a,r)})}function h(e,t,o){let n,r,a=40,l=40;t.rect&&(n=t.rect.x,r=t.rect.y,a=t.rect.w,l=t.rect.h),t.point&&(n=t.point.x,r=t.point.y),c.LV.svg;let s=1/e.width;return new(i()).Rect(n*s-a*s/2*(o-1),r*s-l*s/2*(o-1),a*s*o,l*s*o)}function g(e,t,o,n,i){let r=function(e){if(!e)return null;let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}(t);if(r)for(let t of r.children)!function e(t,o,n,i,r){var a;if("#text"===o.nodeName)!o.textContent||o.textContent.includes("\n")||console.log("nodeName:",o.nodeName,", textContent:",o.textContent,", childNodes.length",o.childNodes.length);else{let l=function(e,t,o){let n=!1,i=!1,r=!1,a=!1,l=document.createElementNS("http://www.w3.org/2000/svg",e.nodeName);if(e.attributes.length>0)for(let t=0;t<e.attributes.length;t++){let o=e.attributes[t];switch(o.name){case"fill":r=!0;break;case"stroke":n=!0;break;case"stroke-width":i=!0;break;case"fill-opacity":a=!0}l.setAttribute(o.name,o.textContent)}return n||(l.style.stroke=null==t?void 0:t.borderColor),i||(l.style.strokeWidth=null==t?void 0:t.borderWidth),r||(l.style.fill=null==t?void 0:t.backgroundColor),a||(l.style.fillOpacity=null==t?void 0:t.opacity),l.setAttribute("transform","scale(".concat(o,")")),l}(o,n,i),c=s(t);c.node().append(l),null===(a=c._svg)||void 0===a||a.setAttribute("class",r),o.childNodes.forEach(o=>{e(t,o,n,i,r)})}}(e,t,o,n,i)}let f=e=>{let t=Array.isArray(null==e?void 0:e.service)&&(null==e?void 0:e.service.length)>0;return{uri:t?(0,d.AG)(null==e?void 0:e.service):null==e?void 0:e.id,imageType:t?u.H.TiledImage:u.H.SimpleImage}},p=(e,t)=>({uri:e,imageType:t?u.H.TiledImage:u.H.SimpleImage});function m(e,t){if(!e)return;t.startsWith(".")||(t="."+t);let o=document.querySelectorAll(t);o&&o.forEach(t=>e.removeOverlay(t))}function w(e,t,o,n){let i=(0,c.LV)(o),{point:r,rect:a,svg:l}=i;if(r||a||l){let o=h(n,i,t);null==e||e.viewport.fitBounds(o)}}function y(e,t,o,n,i){var r;if(!(null==t?void 0:t.items)||(null==t?void 0:t.items.length)===0)return;let a=[];t.items.forEach(t=>{let o=e.get(t.id);"string"==typeof o.target&&o.target.startsWith(n.id)&&a.push(o)}),o&&(null===(r=i.contentSearch)||void 0===r?void 0:r.overlays)&&v(o,n,i.contentSearch.overlays,a,"content-search-overlay")}let x=(e,t,o,n)=>{var i;let r;if(!t||!e||!o||("FragmentSelector"===e.type&&e.value?r="".concat(o.id,"#").concat(e.value):"PointSelector"===e.type?r={source:o.id,selector:{type:"PointSelector",x:e.x,y:e.y}}:"SvgSelector"===e.type&&(r={source:o.id,selector:{type:"SvgSelector",value:e.value}}),!r))return;let a=(0,c.LV)(r);if(!a)return;let l=h(o,a,(null==n?void 0:null===(i=n.annotationOverlays)||void 0===i?void 0:i.zoomLevel)||2);l&&t.viewport.fitBounds(l)}},2014:function(e,t,o){var n,i;o.d(t,{H:function(){return n}}),(i=n||(n={})).TiledImage="tiledImage",i.SimpleImage="simpleImage"}}]);