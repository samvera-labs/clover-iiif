"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{6991:function(e,t,n){n.r(t),n.d(t,{default:function(){return eg}});var i=n(2676),a=n(5271);let o={activeLanguages:void 0,annotations:[],manifest:void 0,options:{offset:0,figure:{display:"image-viewer",aspectRatio:100/61.8,width:"38.2%"},language:{defaultLanguages:void 0,enabled:!1,options:[]}},searchActiveMatch:void 0,searchMatches:void 0,searchString:void 0,vault:new(n(4340)).j};function r(e,t){switch(t.type){case"updateAnnotations":return{...e,annotations:t.payload};case"updateActiveLanguages":return{...e,activeLanguages:t.payload};case"updateSearchActiveMatch":return{...e,searchActiveMatch:t.payload};case"updateSearchMatches":return{...e,searchMatches:t.payload};case"updateSearchString":return{...e,searchString:t.payload};default:return e}}let l=(0,a.createContext)({dispatch:()=>null,state:o}),s=e=>{var t;let{children:n,manifest:s}=e,d={...o.options,...e.options},c=(null===(t=d.language)||void 0===t?void 0:t.defaultLanguages)||[],[u,p]=(0,a.useReducer)(r,{...o,activeLanguages:c,options:d});return(0,i.jsx)(l.Provider,{value:{state:{...u,manifest:s,options:d},dispatch:p},children:n})};var d=n(4384),c=n(8158);let u=(0,c.zo)("div",{display:"flex",flexDirection:"row",alignItems:"center",background:"$primary",filter:"drop-shadow(2px 2px 5px #0002)",borderRadius:"2rem"}),p=(0,c.zo)("div",{position:"absolute",zIndex:10,overflow:"hidden",height:"2rem",justifyContent:"space-between"}),h=(0,c.zo)("header",{fontSize:"1",paddingBottom:"1.618rem",position:"relative",display:"flex",justifyContent:"space-between",zIndex:2,".clover-scroll-header-label":{fontWeight:"400",fontSize:"1.25rem"}}),g=(0,c.zo)("section",{margin:"0",gap:"1rem",position:"relative",zIndex:0});var x=n(757),m=n(4868);let v=(0,c.zo)("div",{width:"2rem",["".concat(m.tr)]:{background:"$primary",width:"inherit",display:"flex",justifyContent:"center",borderRadius:"2rem","&:hover":{background:"$accent"},svg:{fill:"$secondary"}},["".concat(m.Hz)]:{"> label":{fontSize:"0.8333rem",display:"flex",marginBottom:"0.5rem"}}}),f=(0,c.zo)("div",{width:"1rem",height:"1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted",border:"1px solid $secondaryAlt",display:"inline-flex",fontSize:"0.7222rem",alignContent:"center",justifyContent:"center",textAlign:"center",flexDirection:"column"}),b=(0,c.zo)(x.z$,{marginTop:"-1px"}),y=(0,c.zo)(x.fC,{display:"flex",alignContent:"center",alignItems:"center",gap:"0.5rem","&[data-state='checked']":{["".concat(f)]:{backgroundColor:"$accent",borderColor:"$accent",color:"$secondary"}}});var j=e=>{var t;let{lang:n,isChecked:o}=e,{state:r,dispatch:s}=(0,a.useContext)(l),{activeLanguages:d,options:c}=r,{language:u}=c,p=((null==u?void 0:null===(t=u.options)||void 0===t?void 0:t.find(e=>Object.keys(e)[0]===n))||n)[n]||n;return(0,i.jsxs)(y,{checked:o,onCheckedChange:e=>{s({type:"updateActiveLanguages",payload:e&&void 0!==d?[...d,n]:null==d?void 0:d.filter(e=>e!==n)})},children:[(0,i.jsx)(f,{children:(0,i.jsx)(b,{children:"âœ“"})}),p]})},w=n(8855),z=n(5323);let C=e=>{let{title:t,style:n={}}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:n,children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{d:"M478.33 433.6l-90-218a22 22 0 00-40.67 0l-90 218a22 22 0 1040.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 00458 464a22 22 0 0020.32-30.4zM334.83 362L368 281.65 401.17 362zM267.84 342.92a22 22 0 00-4.89-30.7c-.2-.15-15-11.13-36.49-34.73 39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 000-44H214V70a22 22 0 00-44 0v20H54a22 22 0 000 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 00-40.58 17c.58 1.38 14.55 34.23 52.86 83.93.92 1.19 1.83 2.35 2.74 3.51-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1021.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59 22.52 24.08 38 35.44 38.93 36.1a22 22 0 0030.75-4.9z"})]})};var k=()=>{let{state:e}=(0,a.useContext)(l),{activeLanguages:t,annotations:n}=e,o=n?(0,z.k)(n):[];return(0,i.jsx)(v,{children:(0,i.jsxs)(w.J2,{children:[(0,i.jsx)(w.J2.Trigger,{children:(0,i.jsx)(C,{title:"language",style:{width:"16px",height:"16px"}})}),(0,i.jsxs)(w.J2.Content,{children:[(0,i.jsx)("label",{children:"Language"}),o.map(e=>(0,i.jsx)(j,{isChecked:null==t?void 0:t.includes(e),lang:e},e))]})]})})},S=n(1390);let L="255, 197, 32";(0,c.zo)("span",{fontWeight:"700"}),(0,c.zo)("div",{display:"flex",gap:"0.25rem"});let E=(0,c.zo)("div",{fontSize:"0.9rem !important",color:"$secondaryAlt",margin:"0 0.5em"});(0,c.zo)("div",{display:"flex",flexDirection:"column",button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"2rem",border:"1px solid #6662",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:"rgba(".concat(L,", 0.2)"),borderColor:"rgba(".concat(L,", 0.2)"),opacity:"1","&:hover":{backgroundColor:"rgba(".concat(L,", 0.2)")}}}});let M=(0,c.zo)("input",{margin:"0",background:"none",zIndex:"2",height:"2rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",fontFamily:"inherit",outline:"none !important",border:"none !important",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",flexGrow:"0",width:"2rem"}),I=(0,c.zo)("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",color:"$secondary !important",fill:"$secondary !important",stroke:"$secondary !important",transition:"$all",cursor:"pointer",svg:{color:"inherit",fill:"inherit",stroke:"inherit"}}),$=(0,c.zo)("button",{opacity:"1",display:"flex",alignItems:"center",width:"1.25em",height:"1.25em",alignSelf:"center",margin:"0 0.25rem",fill:"$secondary",flexShrink:"0",svg:{color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),A=(0,c.zo)("form",{display:"flex",justifyContent:"space-between",transition:"$all",flexGrow:"1",variants:{isPanelExpanded:{true:{["".concat(I)]:{marginLeft:"0",cursor:"text"},["".concat(M)]:{width:"100%",padding:"0 1rem 0 2rem",cursor:"text"}},false:{"&:hover":{backgroundColor:"$accent !important",borderRadius:"2rem"},["".concat(I)]:{cursor:"pointer"},["".concat(M)]:{cursor:"pointer","&::placeholder":{color:"transparent !important"}}}}}}),R=(0,c.zo)("div",{display:"flex",alignItems:"center",gap:"0.25rem","&[data-active=true]":{paddingRight:"0.5rem"},button:{fontSize:"0.9em",fill:"$secondary",color:"$secondary",stroke:"$secondary",svg:{fill:"inherit",color:"inherit",stroke:"inherit",width:"1.25em"}}});var H=e=>{let{activeIndex:t,searchString:n,total:a}=e,o=0===a?(0,i.jsxs)(i.Fragment,{children:["No results for ",(0,i.jsx)("strong",{children:n})]}):(0,i.jsxs)(i.Fragment,{children:[t+1," of ",a," results for ",(0,i.jsx)("strong",{children:n})]});return(0,i.jsx)(E,{children:o})};let P=e=>{let{title:t,style:n={}}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:n,children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})]})},B={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}};var D=()=>{let[e,t]=(0,a.useState)(0),{dispatch:n,state:o}=(0,a.useContext)(l),{activeLanguages:r,annotations:s,searchString:d=""}=o,c=new S.Z.Document(B),u=[];null==s||s.forEach(e=>{var t;null==e||null===(t=e.body)||void 0===t||t.forEach(e=>{var t;if(!(null==r?void 0:r.includes(String(e.language))))return;let n=null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.replace(/\n/g,"");u.push(null==e?void 0:e.id),c.add({id:null==e?void 0:e.id,content:n})})});let p=function(e,t){let n=RegExp(t,"gi"),i={total:0,matches:[]};return e.forEach(e=>{let t;let a=e.body.id,o=e.body.value,r=[],l=0;for(console.log(t);null!==(t=n.exec(o));)l++,r.push("".concat(a,"/").concat(l));l>0&&(i.total+=l,i.matches.push({[a]:r}))}),i}((null==c?void 0:c.search(d).reduce((e,t)=>[...new Set([...e,...t.result])],[])).map(e=>null==s?void 0:s.filter(t=>t.body.find(t=>t.id===e)).map(t=>{let n=t.body.findIndex(t=>t.id===e);return{...t,body:t.body[n]}}).shift()),d),h=p.matches.flatMap(e=>Object.values(e).flat());return(0,a.useEffect)(()=>{t(0),n({type:"updateSearchMatches",payload:p}),n({type:"updateSearchActiveMatch",payload:void 0})},[d]),(0,a.useEffect)(()=>{n({type:"updateSearchActiveMatch",payload:h[e]})},[e,d]),(0,i.jsxs)(R,{"data-active":!!d,children:[d&&(0,i.jsx)(H,{activeIndex:e,searchString:d,total:p.total}),(null==p?void 0:p.total)!==0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>t(e=>e>0?e-1:h.length-1),children:(0,i.jsx)(P,{title:"previous",style:{transform:"rotate(90deg)"}})}),(0,i.jsx)("button",{onClick:()=>t(e=>e<h.length-1?e+1:0),children:(0,i.jsx)(P,{title:"next",style:{transform:"rotate(270deg)"}})})]})]})};let F=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Search"}),(0,i.jsx)("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})]}),V=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Close"}),(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]});var W=e=>{let{togglePanel:t,isPanelExpanded:n}=e,{dispatch:o,state:r}=(0,a.useContext)(l),{searchString:s}=r,d=(0,a.useRef)(null),c=()=>d.current===document.activeElement&&t(!0),u=()=>{var e;null===(e=d.current)||void 0===e||e.blur(),p(),t(!1),o({payload:"",type:"updateSearchString"}),o({payload:void 0,type:"updateSearchActiveMatch"})},p=()=>{d.current&&(d.current.value="")},h=e=>{"Escape"===e.key&&(e.preventDefault(),u())};return(0,a.useEffect)(()=>{var e;return null===(e=document)||void 0===e||e.addEventListener("keydown",h),()=>{var e;null===(e=document)||void 0===e||e.removeEventListener("keydown",h)}},[]),(0,a.useEffect)(()=>{if(null==d?void 0:d.current)return d.current.addEventListener("focus",c),d.current.addEventListener("blur",c),()=>{d.current&&(d.current.removeEventListener("focus",c),d.current.removeEventListener("blur",c))}},[]),(0,i.jsxs)(A,{id:"scroll-search",autoComplete:"off",isPanelExpanded:n,"data-testid":"scroll-panel-search-form",children:[(0,i.jsx)(I,{onClick:()=>{var e;return null==d?void 0:null===(e=d.current)||void 0===e?void 0:e.focus()},children:(0,i.jsx)(F,{})}),(0,i.jsx)(M,{ref:d,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:s,onChange:e=>{var t;o({payload:null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value,type:"updateSearchString"})}}),(0,i.jsx)($,{"aria-disabled":!n,"aria-label":"Close search panel",onClick:e=>{e.preventDefault(),u()},disabled:!n,children:(0,i.jsx)(V,{})})]})};let T=(0,c.zo)("div",{display:"flex",position:"relative",zIndex:"1",maxWidth:"100%",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}});var _=e=>{let{width:t,isFixed:n}=e,o=(0,a.useRef)(null),[r,s]=a.useState(!1),{state:d}=(0,a.useContext)(l),{options:c}=d,{offset:h,language:g}=c,x=null==g?void 0:g.enabled,m=x?4.5:2;return(0,i.jsxs)(p,{ref:o,"data-testid":"scroll-panel",style:{display:r?"unset":"inline-flex",left:r?"unset":n?"unset":"calc(".concat(t,"px - ").concat(m,"rem)"),marginLeft:r?"-".concat(t,"px"):n?"-".concat(m,"rem"):"unset",width:r?t:"".concat(m,"rem"),...n?{position:"fixed",top:n?h:0}:{}},children:[!r&&x&&(0,i.jsx)(k,{}),(0,i.jsxs)(u,{children:[(0,i.jsx)(W,{togglePanel:function(e){s(e)},isPanelExpanded:r}),(0,i.jsx)(T,{"data-testid":"scroll-panel-results","data-panel-expanded":r,isPanelExpanded:r,children:r&&(0,i.jsx)(D,{})})]})]})},J=e=>{let{label:t}=e,{state:n}=(0,a.useContext)(l),{options:o}=n,{offset:r}=o,s=(0,a.useRef)(null),[c,u]=(0,a.useState)(0),[p,g]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=s.current;if(!e)return;let t=new ResizeObserver(e=>{for(let t of e)t.contentRect&&u(t.contentRect.width)});return t.observe(e),()=>{t.disconnect()}},[]),(0,a.useEffect)(()=>{let e=()=>{let e=s.current;e&&(e.getBoundingClientRect().top<=r?g(!0):g(!1))};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,i.jsxs)(h,{ref:s,children:[(0,i.jsx)(d.__,{label:t,className:"clover-scroll-header-label"}),(0,i.jsx)("div",{children:(0,i.jsx)(_,{width:c,isFixed:p})})]})};let N=(0,c.zo)("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),O=(0,c.zo)("div",{transition:"$all",flexShrink:0}),G=(0,c.zo)("div",{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"flex-start","> div":{display:"flex",flexDirection:"row",gap:"2.618rem","> div":{width:"calc(100% / var(--num-items))",boxSizing:"border-box"}}}),Y=(0,c.zo)("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",width:"61.8%",zIndex:0,marginLeft:"38.2%",display:"flex",justifyContent:"flex-end","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"calc(100% -  2.618em)",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),X=(0,c.zo)("div",{display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{["& ".concat(O)]:{opacity:1,zIndex:0,transform:"translateX(0)"}}});var Z=n(1675);let q=(0,c.zo)(Z.o,{}),K=(0,c.zo)("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,gap:"0.382rem",em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}});var Q=e=>{let{canvas:t,canvasInfo:{current:n,total:a}}=e;return(0,i.jsxs)("figcaption",{children:[(0,i.jsxs)("em",{children:[n," / ",a]}),(null==t?void 0:t.label)&&(0,i.jsx)(d.__,{label:null==t?void 0:t.label}),(null==t?void 0:t.summary)&&(0,i.jsx)(d.ER,{summary:null==t?void 0:t.summary,as:"p"})]})},U=n(1338);let ee=(0,c.zo)("div",{width:"100%",height:"100%",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"});var et=a.memo(e=>{let{body:t,label:n}=e;return(0,i.jsx)(ee,{"data-testid":"scroll-figure-image",children:(0,i.jsx)(U.default,{body:t,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...n&&{label:n}})})}),en=a.memo(e=>{let{body:t,label:n}=e;return(0,i.jsx)(ee,{"data-testid":"scroll-figure-thumbnail",children:(0,i.jsx)(d.pl,{thumbnail:[t],style:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"center"},altAsLabel:n})})}),ei=n(9822),ea=e=>{let{canvas:t,canvasInfo:n}=e,{state:r}=(0,a.useContext)(l),{vault:s,options:d}=r,{figure:c}=d,u=c.display?c.display:o.options.figure.display,p=c.aspectRatio?c.aspectRatio:o.options.figure.aspectRatio,h=(0,ei.G)(s,t.id);return h?(0,i.jsxs)(K,{children:[null==h?void 0:h.map(e=>(0,i.jsxs)(q,{ratio:p,children:["thumbnail"===u&&(0,i.jsx)(en,{body:e,label:null==t?void 0:t.label}),"image-viewer"===u&&(0,i.jsx)(et,{label:null==t?void 0:t.label,body:e})]},null==e?void 0:e.id)),(0,i.jsx)(Q,{canvas:t,canvasInfo:n})]}):null};let eo="255, 197, 32",er=(0,c.zo)("div",{opacity:"1","&[dir=rtl]":{textAlign:"right"},"&[data-active-language=false]":{opacity:"0",width:"0",height:"0"},ul:{padding:"1rem"},li:{listStyleType:"disc",li:{listStyleType:"circle"}},"span.clover-scroll-highlight":{position:"relative",fontWeight:"bold","&.active":{"&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:"1px solid rgba(".concat(eo,", 0.2)"),borderBottom:"1px solid rgba(".concat(eo,", 0.618)"),boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:"rgba(".concat(eo,", 0.2)"),zIndex:-1}},"&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:"1px solid #6663",borderBottom:"1px solid #6664",boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:"#6661",zIndex:-1}}}),el=e=>{let{searchString:t="",content:n,stringLength:i=150}=e,a=n.toLowerCase().indexOf(t.toLowerCase());if(-1!==a){let e=Math.max(0,a-i/2),o=Math.min(n.length,a+t.length+i/2);if(e>0){let t=n.lastIndexOf(" ",e+1);e=t>0?t+1:e}if(o<n.length){let e=n.indexOf(" ",o-1);o=e>-1?e:o}n=(e>0?"... ":"")+n.substring(e,o)+(o<n.length?" ...":"")}else n=String(n.substring(0,i)+"...");return n};var es=n(1796),ed=e=>{let t,{body:n,numItems:o=1,stringLength:r,type:s="content"}=e,{state:d}=(0,a.useContext)(l),{activeLanguages:c,searchActiveMatch:u,searchString:p}=d,h=String(n.value);"snippet"==s&&(h=el({searchString:p,content:h,stringLength:r}));let g=(0,es.Z)(h);if("text/plain"===n.format&&(t=null==h?void 0:h.replace(/\n/g,"<br />")),"text/markdown"===n.format&&(t=null==g?void 0:g.html),"text/html"===n.format&&(t=h),String(p)&&t){let e=1,i=RegExp("(".concat(p,")"),"gi");t=null==t?void 0:t.replace(i,t=>{let i="".concat(n.id,"/").concat(e),a=u===i;return e+=1,'<span class="clover-scroll-highlight'.concat(a?" active":"",'" data-index="').concat(i,'">').concat(t,"</span>")})}let x=[n.id,s].join("-"),m=["ar"].includes(String(n.language)),v=String(n.language);return((0,a.useEffect)(()=>{if(u){let e=document.querySelector('[data-index="'.concat(u,'"]'));e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},[u]),t)?(0,i.jsx)(er,{dangerouslySetInnerHTML:{__html:t},"data-active-language":null==c?void 0:c.includes(v),"data-body-id":x,"data-testid":"scroll-item-body",style:{"--num-items":o},id:x,dir:m?"rtl":"ltr",css:{fontSize:m?"1.3em":"1em"},lang:v}):null},ec=a.memo(e=>{var t;let{hasItemBreak:n,isLastItem:r,item:s,itemCount:d,itemNumber:c}=e,{state:u}=a.useContext(l),{activeLanguages:p,annotations:h,vault:g,options:x}=u,{figure:m}=x,v=null==g?void 0:g.get(s),f=null==p?void 0:p.length,b=null==h?void 0:null===(t=h.filter(e=>{var t,n;return(null===(n=e.target)||void 0===n?void 0:null===(t=n.source)||void 0===t?void 0:t.id)===s.id}))||void 0===t?void 0:t.map(e=>null==e?void 0:e.body.map((e,t)=>(0,i.jsx)(ed,{body:e,numItems:f},t)));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(N,{"data-page-break":n,"data-page-number":c,"data-last-item":r,children:[(0,i.jsx)(O,{css:{width:m.width?m.width:o.options.figure.width},"data-width":m.width,children:v&&(0,i.jsx)(ea,{canvas:v,canvasInfo:{current:c,total:d}})}),(0,i.jsx)(G,{children:(0,i.jsx)("div",{children:(null==b?void 0:b.length)?b:(0,i.jsx)("p",{children:"[Blank]"})})})]}),n&&(0,i.jsx)(Y,{"aria-label":"Page Break"})]})}),eu=e=>{let{items:t}=e;return(0,i.jsx)(X,{children:t.map((e,n)=>{let a=n+1,o=a===t.length;return(0,i.jsx)(ec,{item:e,hasItemBreak:a<t.length,isLastItem:o,itemCount:t.length,itemNumber:a},e.id)})})},ep=(e,t)=>{let[n,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{if(!t)return;let n=[];null==e||e.forEach(e=>{var i;let a=t.get(e);null==a||null===(i=a.annotations)||void 0===i||i.forEach(e=>{var i;let a=t.get(e);null==a||null===(i=a.items)||void 0===i||i.forEach(e=>{let i=t.get(e);if(i){var a;n.push({...i,body:null==i?void 0:null===(a=i.body)||void 0===a?void 0:a.map(e=>t.get(e))})}})})}),i(n.reduce((e,t)=>(e.some(e=>e.id===t.id)||e.push(t),e),[]))},[e,t]),n};let eh=e=>{let{iiifContent:t}=e,[n,o]=(0,a.useState)(),{state:r,dispatch:s}=(0,a.useContext)(l),{options:d,vault:c}=r,u=ep(null==n?void 0:n.items,c);return((0,a.useEffect)(()=>{c&&c.load(t).then(e=>e&&o(e)).catch(e=>console.error("Manifest ".concat(t," failed to load: ").concat(e)))},[t]),(0,a.useEffect)(()=>{var e;let t=(null==d?void 0:null===(e=d.language)||void 0===e?void 0:e.defaultLanguages)||(0,z.k)(u);console.log(u),s({type:"updateAnnotations",payload:u}),s({type:"updateActiveLanguages",payload:t})},[u]),n)?(0,i.jsx)(g,{children:n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{label:null==n?void 0:n.label}),(0,i.jsx)(eu,{items:n.items})]})}):null};var eg=e=>{let{iiifContent:t,options:n}=e;return(0,i.jsx)(s,{options:n,children:(0,i.jsx)(eh,{iiifContent:t})})}},7097:function(e,t,n){n.d(t,{x:function(){return i}});let i=(0,n(8158).zo)("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}})},8622:function(e,t,n){n.d(t,{J:function(){return o}});var i=n(2676);n(5271);var a=n(7097);let o=e=>(0,i.jsx)(a.x,{...e,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:e.children});o.Title=e=>{let{children:t}=e;return(0,i.jsx)("title",{children:t})},o.Add=()=>(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),o.Audio=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),(0,i.jsx)("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),(0,i.jsx)("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})]}),o.Close=()=>(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),o.Download=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})]}),o.Image=()=>(0,i.jsx)("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),o.Video=()=>(0,i.jsx)("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"})},4868:function(e,t,n){n.d(t,{Hz:function(){return d},bC:function(){return l},tr:function(){return c},uv:function(){return u},yP:function(){return s}});var i=n(9454),a=n(8158);let o=(0,a.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),r=(0,a.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),l=(0,a.zo)(i.Eh,{fill:"$secondaryAlt"}),s=(0,a.zo)(i.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),d=(0,a.zo)(i.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:r},'&[data-side="bottom"]':{animationName:o},'&[data-align="end"]':{["& ".concat(l)]:{margin:"0 0.7rem"}}}),c=(0,a.zo)(i.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),u=(0,a.zo)(i.fC,{boxSizing:"content-box"})},8855:function(e,t,n){n.d(t,{JO:function(){return i.J},J2:function(){return r},Vp:function(){return s}});var i=n(8622),a=n(2676),o=n(4868);n(5271);let r=e=>{let{children:t}=e;return(0,a.jsx)(o.uv,{children:t})};r.Trigger=e=>(0,a.jsx)(o.tr,{...e,children:e.children}),r.Content=e=>(0,a.jsxs)(o.Hz,{...e,sideOffset:5,collisionPadding:21,children:[(0,a.jsx)(o.bC,{}),(0,a.jsx)(o.yP,{children:(0,a.jsx)(i.J,{isSmall:!0,children:(0,a.jsx)(i.J.Close,{})})}),e.children]});var l=n(7097);let s=(0,n(8158).zo)("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},["".concat(l.x)]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}})},9854:function(e,t,n){n.d(t,{g:function(){return i}});let i=(e,t,n,i)=>{let a={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(a.canvas=e.get(t),a.canvas){var o,r;a.annotationPage=e.get(a.canvas.items[0]),a.accompanyingCanvas=(null===(o=a.canvas)||void 0===o?void 0:o.accompanyingCanvas)?e.get(null===(r=a.canvas)||void 0===r?void 0:r.accompanyingCanvas):void 0}if(a.annotationPage){let o=e.get(a.annotationPage.items).map(t=>({body:e.get(t.body[0].id),motivation:t.motivation,type:"Annotation"})),r=[];o.forEach(t=>{"Choice"===t.body.type?t.body.items.forEach(n=>r.push({...t,id:n.id,body:e.get(n.id)})):r.push(t)}),a.annotations=r.filter(a=>{if(a){if(!a.body||!a.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",a);return}let o=a.body;Array.isArray(o)&&(o=o[0]);let r=e.get(o.id);if(r)switch(n){case"painting":return a.target===t.id&&a.motivation&&"painting"===a.motivation[0]&&i.includes(r.type)&&(a.body=r),!!a;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return a}},9822:function(e,t,n){n.d(t,{G:function(){return a}});var i=n(9854);let a=(e,t)=>{let n=(0,i.g)(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations&&n.annotations)return n.annotations.map(e=>null==e?void 0:e.body)}}}]);